// Generated by CoffeeScript 1.9.3

/*

Simple FileReader for File API.
 */

(function() {
  if (typeof window.FiveKit === "undefined") {
    window.FiveKit = {};
  }

  FiveKit.FileReader = (function() {
    function FileReader(options) {
      this.options = options;
      this.reader = new window.FileReader;
      if (this.reader.addEventListener) {
        if (this.options.onLoadStart) {
          this.reader.addEventListener('loadstart', this.options.onLoadStart, false);
        }
        if (this.options.onLoad) {
          this.reader.addEventListener('load', this.options.onLoad, false);
        }
        if (this.options.onLoaded) {
          this.reader.addEventListener('loadend', this.options.onLoaded, false);
        }
        if (this.options.onAbort) {
          this.reader.addEventListener('abort', this.options.onAbort, false);
        }
        if (this.options.onError) {
          this.reader.addEventListener('error', this.options.onError, false);
        }
        if (this.options.onProgress) {
          this.reader.addEventListener('progress', this.options.onProgress, false);
        }
      } else {
        if (this.options.onLoaded) {
          this.reader.onloadend = this.options.onLoaded;
        }
        if (this.options.onError) {
          this.reader.onerror = this.options.onError;
        }
        if (this.options.onProgress) {
          this.reader.onprogress = this.options.onProgress;
        }
      }
      this.reader.onloadend = function(e) {};
    }

    FileReader.prototype.read = function(file) {
      return this.reader.readAsDataURL(file);
    };

    FileReader.prototype.isSupported = function() {
      return typeof window.FileReader !== 'undefined';
    };

    return FileReader;

  })();

}).call(this);
